{"version":3,"sources":["../../lib/scrypt.js"],"names":[],"mappings":"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","file":"scrypt.js","sourcesContent":["/*! by Tom Thorogood <me@tomthorogood.co.uk> */\n/*! This work is licensed under the Creative Commons Attribution 4.0\nInternational License. To view a copy of this license, visit\nhttp://creativecommons.org/licenses/by/4.0/ or see LICENSE. */\n\nwindow.scrypt = function () {\n\t// https://github.com/golang/crypto/blob/master/scrypt/scrypt.go\n\tfunction salsaXOR(tmp, inp, out) {\n\t\tlet w = [ ];\n\t\tlet x = [ ];\n\t\t\n\t\tfor (let i = 0; i < 16; i++) {\n\t\t\tx[i] = w[i] = tmp[i] ^ inp[i];\n\t\t}\n\t\t\n\t\tfor (let i = 0, u; i < 8; i += 2) {\n\t\t\tu = x[0]  + x[12]; x[4]  ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[4]  + x[0];  x[8]  ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[8]  + x[4];  x[12] ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[12] + x[8];  x[0]  ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[5]  + x[1];  x[9]  ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[9]  + x[5];  x[13] ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[13] + x[9];  x[1]  ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[1]  + x[13]; x[5]  ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[10] + x[6];  x[14] ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[14] + x[10]; x[2]  ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[2]  + x[14]; x[6]  ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[6]  + x[2];  x[10] ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[15] + x[11]; x[3]  ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[3]  + x[15]; x[7]  ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[7]  + x[3];  x[11] ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[11] + x[7];  x[15] ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[0] + x[3]; x[1] ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[1] + x[0]; x[2] ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[2] + x[1]; x[3] ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[3] + x[2]; x[0] ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[5] + x[4]; x[6] ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[6] + x[5]; x[7] ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[7] + x[6]; x[4] ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[4] + x[7]; x[5] ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[10] + x[9];  x[11] ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[11] + x[10]; x[8]  ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[8]  + x[11]; x[9]  ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[9]  + x[8];  x[10] ^= (u << 18) | (u >>> (32 - 18));\n\t\t\t\n\t\t\tu = x[15] + x[14]; x[12] ^= (u << 7)  | (u >>> (32 - 7));\n\t\t\tu = x[12] + x[15]; x[13] ^= (u << 9)  | (u >>> (32 - 9));\n\t\t\tu = x[13] + x[12]; x[14] ^= (u << 13) | (u >>> (32 - 13));\n\t\t\tu = x[14] + x[13]; x[15] ^= (u << 18) | (u >>> (32 - 18));\n\t\t}\n\t\t\n\t\tfor (let i = 0; i < 16; i++) {\n\t\t\tout[i] = tmp[i] = x[i] + w[i];\n\t\t}\n\t}\n\t\n\tfunction blockMix(inp, out, r) {\n\t\tlet tmp = inp.slice((2 * r - 1) * 16, (2 * r) * 16);\n\t\t\n\t\tfor (let i = 0; i < 2 * r; i += 2) {\n\t\t\tsalsaXOR(tmp, inp.subarray(i * 16), out.subarray(i * 8));\n\t\t\tsalsaXOR(tmp, inp.subarray((i + 1) * 16), out.subarray((i + 2 * r) * 8));\n\t\t}\n\t}\n\t\n\tfunction smix(b, r, N, v, x, y) {\n\t\tlet bView = new DataView(b.buffer, b.byteOffset, b.byteLength);\n\t\t\n\t\tfor (let i = 0, j = 0; i < x.length; i++, j += 4) {\n\t\t\tx[i] = bView.getUint32(j, true/*little-endian*/);\n\t\t}\n\t\t\n\t\tfor (let i = 0; i < N; i += 2) {\n\t\t\tv.set(x, i * 32 * r);\n\t\t\tblockMix(x, y, r);\n\t\t\t\n\t\t\tv.set(y, (i + 1) * 32 * r);\n\t\t\tblockMix(y, x, r);\n\t\t}\n\t\t\n\t\tfor (let i = 0, j, sh32 = Math.pow(2, 32); i < N; i += 2) {\n\t\t\tj = (x[(2 * r - 1) * 16] | (x[(2 * r - 1) * 16 + 1] * sh32)) & (N - 1);\n\t\t\t\n\t\t\tfor (let k = 0; k < x.length; k++) {\n\t\t\t\tx[k] ^= v[j * 32 * r + k];\n\t\t\t}\n\t\t\t\n\t\t\tblockMix(x, y, r);\n\t\t\t\n\t\t\tj = (y[(2 * r - 1) * 16] | (y[(2 * r - 1) * 16 + 1] * sh32)) & (N - 1);\n\t\t\t\n\t\t\tfor (let k = 0; k < y.length; k++) {\n\t\t\t\ty[k] ^= v[j * 32 * r + k];\n\t\t\t}\n\t\t\t\n\t\t\tblockMix(y, x, r);\n\t\t}\n\t\t\n\t\tfor (let i = 0, j = 0; i < x.length; i++, j += 4) {\n\t\t\tbView.setUint32(j, x[i], true/*little-endian*/);\n\t\t}\n\t}\n\t\n\t// This is the scrypt function\n\t// It returns a promise which will resolve asynchronously\n\treturn function (passphrase, salt, N, r, p, keyLen) {\n\t\t// Check that p and r are not too large\n\t\tif (r * p >= Math.pow(2, 30)) {\n\t\t\treturn Promise.reject(new Error(\"Parameters r and p are too large\"));\n\t\t}\n\t\t\n\t\t// Check that N is a power of 2 greater than 1 and that we can safely work on it in JS\n\t\tif (N < 2 || N & (N - 1) != 0 || N > Number.MAX_SAFE_INTEGER) {\n\t\t\treturn Promise.reject(new Error(\"Argument N is invalid; N must be > 1, a power of 2 and less than 2^53\"));\n\t\t}\n\t\t\n\t\tlet x = new Uint32Array(32 * r);\n\t\tlet y = new Uint32Array(32 * r);\n\t\tlet v = new Uint32Array(32 * N * r);\n\t\t\n\t\tlet b = pbkdf2(passphrase, salt, 1, p * 128 * r, \"SHA-256\");\n\t\t\n\t\tfor (let i = 0; i < p; i++) {\n\t\t\t// setImmediate (a 0-delay setTimeout of sorts) is needed\n\t\t\t// here so that this code is asynchronous and will not block\n\t\t\t// the UI thread\n\t\t\tb = b.then(b => new Promise((resolve, reject) => window.setImmediate(() => (smix(b.subarray(i * 128 * r), r, N, v, x, y), resolve(b)))));\n\t\t}\n\t\t\n\t\treturn b.then(b => pbkdf2(passphrase, b, 1, keyLen, \"SHA-256\"));\n\t};\n}();"]}